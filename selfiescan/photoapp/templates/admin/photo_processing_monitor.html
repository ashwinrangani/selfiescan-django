{% extends "admin/change_list.html" %}

{% block content %}
<h1>Unprocessed Photo Batches</h1>

{% if groups %}
<table class="table">
    <thead>
        <tr>
            <th>Event</th>
            <th>Photographer</th>
            <th>Unprocessed</th>
            <th>Total</th>
            <th>Action</th>
        </tr>
    </thead>

    <tbody>
    {% for g in groups %}
        <tr>
            <td>{{ g.event.name }}</td>
            <td>{{ g.photographer.get_full_name|default:g.photographer.username }}</td>
            <td>{{ g.unprocessed_count }}</td>
            <td>{{ g.total_photos }}</td>
            <td>
                <a class="button" href="{% url 'admin:rerun_processing' g.event.id %}">
                    Re-run Processing
                </a>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% else %}
<p>No pending photo batches â€” everything is processed. ðŸŽ‰</p>
{% endif %}

{% endblock %}

