<nav id="navbar" class="navbar rounded-box fixed top-0 z-10 backdrop-blur-md bg-opacity-90 bg-base-100 shadow transition-transform duration-300">
  <div class="navbar-start">
    <div class="dropdown relative inline-flex [--auto-close:inside] [--offset:9]">
      <button id="dropdown-name" type="button" class="dropdown-toggle btn btn-text btn-circle dropdown-open:bg-base-content/10 dropdown-open:text-base-content" aria-haspopup="menu" aria-expanded="false" aria-label="Dropdown">
        <span class="icon-[tabler--menu-2] size-5"></span>
      </button>
      <ul class="dropdown-menu dropdown-open:opacity-100 z-10 hidden" role="menu" aria-orientation="vertical" aria-labelledby="dropdown-name">
        <li><a class="dropdown-item" href="{% url 'photographer' %}">Dashboard</a></li>
        <li><a class="dropdown-item" href="">Link 2</a></li>
        <li><a class="dropdown-item z-10" href="#">Link 3</a></li>
        <hr class="border-base-content/25 -mx-2 my-3" />
        <li><a class="dropdown-item" href="#">Link 4</a></li>
      </ul>
    </div>
  </div>
  <div class="navbar-center flex items-center">
    <a class="link text-base-content/90 link-neutral text-3xl font-pacifico no-underline" href="/">
      SelfieScan
    </a>
    <span class="bg-primary size-8 icon-[tabler--camera-search]"></span>
    
  </div>
  <div class="navbar-end items-center gap-2 md:gap-4">
    <button id="theme-toggle" class='h-8'>
      <!-- Light Mode Icon -->
      <svg    class="fill-violet-700 block" fill="currentColor" viewBox="0 0 20 20" width="24" height="24">
        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
      </svg>
      <!-- Dark Mode Icon -->
      <svg class="fill-yellow-500 hidden" fill="currentColor" viewBox="0 0 20 20" width="24" height="24">
        <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd">
        </path>
      </svg><span class="sr-only">theme</span>
    </button>
    <div class="dropdown relative -mr-2 md:mr-0 lg:mr-0 inline-flex [--auto-close:inside] [--offset:8] [--placement:bottom-end]">
      <button id="dropdown-scrollable" type="button" class="dropdown-toggle flex items-center" aria-haspopup="menu" aria-expanded="false" aria-label="Dropdown">
        {% if user.is_authenticated %}
        <div class="avatar">
          <div class="size-9.5 rounded-full">
            <img src="{{user.profile.profile_img.url}}" alt="avatar" />
          </div>
        </div>
        {% else %}
        <div class="avatar placeholder">
          <div class="bg-neutral text-neutral-content w-10 rounded-full">
            <span class="icon-[tabler--user] size-6"></span>
          </div>
        </div>
        {% endif %}
        
      </button>
      <ul class="dropdown-menu dropdown-open:opacity-100 hidden min-w-60" role="menu" aria-orientation="vertical" aria-labelledby="dropdown-avatar">
        <li class="dropdown-header gap-2">
          {% if user.is_authenticated %}
          <div class="avatar">
            <div class="w-10 rounded-full">
              <img src="{{user.profile.profile_img.url}}" alt="avatar" />
            </div>
          </div>
          {% else %}
          <div class="avatar placeholder">
            <div class="bg-neutral text-neutral-content w-10 rounded-full">
              <span class="icon-[tabler--user] size-6"></span>
            </div>
          </div>
          {% endif %}
          {% if user.is_authenticated %}
          <div>
            <h6 class="text-base-content/90 text-base font-semibold">{{user.first_name}} {{user.last_name}}</h6>
            <small class="text-base-content/50">{{user.get_username}}</small>
          </div>
          {% else %}
          <div>
            <h6 class="text-base-content/90 text-base font-semibold">Guest</h6>
            <small class="text-base-content/50">Anonymous</small>
          </div>
          {% endif %}
          
        </li>
        <li>
          <a class="dropdown-item" href="{% url 'profile'%}" >
            <span class="icon-[tabler--user]"></span>
            My Profile
          </a>
        </li>
        <li>
          <a class="dropdown-item" href="{% url 'settings' %}">
            <span class="icon-[tabler--settings]"></span>
            Settings
          </a>
        </li>
        <li>
          <a class="dropdown-item" href="{% url 'billing_dashboard' %}">
            <span class="icon-[tabler--receipt-rupee]"></span>
            Billing
          </a>
        </li>
        <li>
          <a class="dropdown-item" href="#">
            <span class="icon-[tabler--help-triangle]"></span>
            FAQs
          </a>
        </li>
        {% if user.is_authenticated %}
        <li class="dropdown-footer gap-2">
          <a class="btn btn-error btn-soft btn-block" href="{% url 'account_logout' %}">
            <span class="icon-[tabler--logout]"></span>
            Sign out
          </a>
        </li>
        {% else %}
        <li class="dropdown-footer gap-2">
          <a class="btn btn-error btn-soft btn-block" href="{% url 'account_login' %}">
            <span class="icon-[tabler--logout]"></span>
            Sign In
          </a>
        </li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>
<script>
  let lastScroll = 0;

window.addEventListener("scroll", () => {
  const navbar = document.getElementById("navbar");
  const currentScroll = window.scrollY;

  if (currentScroll <= navbar.offsetHeight) {
    // Reset to default position if at the top of the page
    navbar.classList.remove("translate-y-[-100%]");
    return;
  }

  if (currentScroll > lastScroll) {
    // Scrolling down: hide the navbar
    navbar.classList.add("translate-y-[-100%]");
  } else {
    // Scrolling up: show the navbar
    navbar.classList.remove("translate-y-[-100%]");
  }

  lastScroll = currentScroll;
});
</script>